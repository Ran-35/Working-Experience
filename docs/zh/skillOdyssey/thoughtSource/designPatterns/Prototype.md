### 原型模式（Prototype Pattern）

原型模式是一种创建型设计模式，它通过复制现有的对象来创建新的对象，而不是通过类构造新对象。

---

### **基本概念**

1. **克隆方法**：通过一个抽象类或接口声明一个 `clone()` 方法，所有实现类都继承或实现这个抽象类或接口。
2. **副本创建**：`clone()` 方法用于创建当前对象的副本。
3. **客户端**：客户端通过 `clone()` 方法来创建对象，而不需要知道对象创建的细节。

---

### **组成结构**

* **Prototype（原型）**：抽象类或接口，声明了克隆方法。
* **ConcretePrototype（具体原型）**：继承自 `Prototype` 类，具体实现克隆方法。
* **Client（客户端）**：通过 `Prototype` 接口来获取一个新的实例。

---

### **实现步骤**

1. **定义原型接口**：定义一个 `clone()` 方法，用于克隆当前对象。
2. **实现具体原型类**：具体类继承原型接口并实现 `clone()` 方法，通常使用浅拷贝或深拷贝来复制对象。
3. **客户端调用克隆方法**：客户端不需要知道如何创建对象，只需调用克隆方法来获得对象。

---

### **示例代码**

#### 1. **定义原型接口**

```java
// 有一个原型接口，里面有 clone() 方法
public interface Motor {
    Motor clone();
}
```

#### 2. **实现具体原型类**

```java
// 有一个实现类，继承自原型接口，重写 clone() 方法
@Getter
public class KawasakiMotor implements Motor {
    private final String model;
    private final int displacement;

    public KawasakiMotor(String model, int displacement) {
        this.model = model;
        this.displacement = displacement;
    }

    @Override
    public Motor clone() {
        return new KawasakiMotor(model, displacement);  // 简单的浅拷贝
    }
}
```

#### 3. **客户端类调用克隆方法**

```java
// 创建客户端类，调用克隆方法
public class PrototypeTest {
    public static void main(String[] args) {
        KawasakiMotor motorA = new KawasakiMotor("Ninja", 1000);
        KawasakiMotor motorB = (KawasakiMotor) motorA.clone();  // 克隆一个新的对象

        System.out.println(motorA);  // 打印原对象
        System.out.println(motorB);  // 打印克隆对象
    }
}
```

---

### **优缺点**

#### **优点**：

1. **性能优势**：通过复制对象来创建新对象，比通过构造函数实例化要高效，尤其是当对象的构建过程复杂时。
2. **避免重复创建复杂对象**：如果对象构造过程非常繁琐或涉及大量资源消耗（如数据库连接、网络通信等），使用原型模式能有效减少资源浪费。
3. **动态扩展**：客户端通过复制现有对象，可以快速产生新对象，而不需要知道创建的具体细节。

#### **缺点**：

1. **深拷贝与浅拷贝问题**：如果对象包含了复杂的引用类型，浅拷贝可能会导致共享引用，产生潜在的问题。深拷贝则需要更多的实现工作，可能会增加复杂性。
2. **克隆实现的复杂性**：实现对象的克隆方法并不是那么简单，特别是当对象中含有很多复杂属性或者依赖关系时。
3. **可能导致类膨胀**：如果需要实现许多类型的对象克隆，则每个类都必须实现克隆方法，可能导致代码冗长。

---

### **应用场景**

1. **游戏开发中的角色克隆**：通过原型模式，可以快速生成相同的游戏角色对象，避免重复创建复杂对象。
2. **文档编辑器中的样式复制**：在文档编辑器中，复制文本、图片等对象的样式时，可以使用原型模式来避免每次都重新设置样式。
3. **图片编辑软件中的滤镜预设复制**：通过克隆已设定的滤镜配置，可以方便地生成相同效果的图片。

---

### **总结**

原型模式适用于需要通过复制现有对象来创建新对象的场景，尤其在对象的创建过程复杂或耗费资源时，可以有效提高效率并避免重复创建。通过使用原型模式，客户端无需关心对象的创建细节，只需要通过克隆已有对象即可。
